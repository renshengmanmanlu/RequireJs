/*!

 @Name：layer mobile v1.7 弹层组件移动版
 @Author：贤心
 @Site：http://layer.layui.com/mobie/
 @License：LGPL

 */
;!function(e){var j=document,h="querySelectorAll",d="getElementsByClassName",c=function(k){return j[h](k)};var a={type:0,shade:true,shadeClose:true,fixed:true,anim:true,isClose:true};var i={extend:function(m){var l=JSON.parse(JSON.stringify(a));for(var k in m){l[k]=m[k]}return l},timer:{},end:{}};i.touch=function(m,l){var k;if(!/Android|iPhone|SymbianOS|Windows Phone|iPad|iPod/.test(navigator.userAgent)){return m.addEventListener("click",function(n){l.call(this,n)},false)}m.addEventListener("touchmove",function(){k=true},false);m.addEventListener("touchend",function(n){n.preventDefault();k||l.call(this,n);k=false},false)};var f=0,g=["layermbox"],b=function(k){var l=this;l.config=i.extend(k);l.view()};b.prototype.view=function(){var p=this,l=p.config,k=j.createElement("div");p.id=k.id=g[0]+f;k.setAttribute("class",g[0]+" "+g[0]+(l.type||0));k.setAttribute("index",f);var q=(function(){var s=typeof l.title==="object";return l.title?'<h3 style="'+(s?l.title[1]:"")+'">'+(s?l.title[0]:l.title)+'</h3><button class="layermend"></button>':""}());var m=(function(){var t=(l.btn||[]).length,s;if(t===0||!l.btn){return""}s='<span type="1">'+l.btn[0]+"</span>";if(t===2){s='<span type="0">'+l.btn[1]+"</span>"+s}return'<div class="layermbtn">'+s+"</div>"}());if(!l.fixed){l.top=l.hasOwnProperty("top")?l.top:100;l.style=l.style||"";l.style+=" top:"+(j.body.scrollTop+l.top)+"px"}if(l.type===2){l.content='<i></i><i class="laymloadtwo"></i><i></i>'}k.innerHTML=(l.shade?"<div "+(typeof l.shade==="string"?'style="'+l.shade+'"':"")+' class="laymshade"></div>':"")+'<div class="layermmain" '+(!l.fixed?'style="position:static;"':"")+'><div class="section"><div class="layermchild '+(l.className?l.className:"")+" "+((!l.type&&!l.shade)?"layermborder ":"")+(l.anim?"layermanim":"")+'" '+(l.style?'style="'+l.style+'"':"")+">"+q+'<div class="layermcont">'+l.content+"</div>"+m+"</div></div></div>";if(!l.type||l.type===2){var o=j[d](g[0]+l.type),r=o.length;if(r>=1){layer.close(o[0].getAttribute("index"))}}document.body.appendChild(k);var n=p.elem=c("#"+p.id)[0];l.success&&l.success(n);p.index=f++;p.action(l,n)};b.prototype.action=function(l,m){var p=this;if(l.time){i.timer[p.index]=setTimeout(function(){layer.close(p.index)},l.time*1000)}if(l.title){var n=m[d]("layermend")[0],t=function(){l.cancel&&l.cancel();layer.close(p.index)};i.touch(n,t)}var k=function(){var u=this.getAttribute("type");if(u==0){l.no&&l.no();if(l.isClose){layer.close(p.index)}}else{l.yes?l.yes(p.index):layer.close(p.index)}};if(l.btn){var o=m[d]("layermbtn")[0].children,r=o.length;for(var s=0;s<r;s++){i.touch(o[s],k)}}if(l.shade&&l.shadeClose){var q=m[d]("laymshade")[0];i.touch(q,function(){layer.close(p.index,l.end)})}l.end&&(i.end[p.index]=l.end)};e.layer={v:"1.8",index:f,open:function(k){var l=new b(k||{});return l.index},close:function(k){var l=c("#"+g[0]+k)[0];if(!l){return}l.innerHTML="";j.body.removeChild(l);clearTimeout(i.timer[k]);delete i.timer[k];typeof i.end[k]==="function"&&i.end[k]();delete i.end[k]},closeAll:function(){var l=j[d](g[0]);for(var m=0,k=l.length;m<k;m++){layer.close((l[0].getAttribute("index")|0))}}};"function"==typeof define?define(function(){return layer}):function(){var n=document.scripts,k=n[n.length-1],m=k.src;var l=m.substring(0,m.lastIndexOf("/")+1);if(k.getAttribute("merge")){return}document.head.appendChild(function(){var o=j.createElement("link");o.href=l+"need/layer.css";o.type="text/css";o.rel="styleSheet";o.id="layermcss";return o}())}()}(window);
